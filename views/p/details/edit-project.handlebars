{{#if is_admin_of_project}}

<div class="hero__img-container">
   <img class="hero__img" src="https://s3.amazonaws.com/hryzn-app-static-assets/{{project.project_image}}" />
   <div class="hero__overlay"></div>
</div>


{{#if errors_2}}
{{#each errors_2}}

<div class="error__msg-3">
   <p>{{msg}}</p>
   <p class="error__exit">&times;</p>
</div>

{{/each}}
{{/if}}


{{! Project Form }}
<form method="post" class="edit-project-form" action="/p/details/edit/{{project._id}}" enctype="multipart/form-data">


   {{! Public or Private checkbox }}
   <div class="checkbox__wrapper">
      <label class="check__container">
         <input id="isPrivateCheck" class="form__input-checkbox {{#if project.is_private}}checked{{/if}}" type="checkbox">
         <span class="checkmark">Private Project</span>
      </label>
      <label class="check__container">
         <input id="isPublicCheck" class="form__input-checkbox {{#if project.is_private}}{{else}}checked{{/if}}" type="checkbox" checked>
         <span class="checkmark">Public Project</span>
      </label>
   </div>
   <br />
   <p class="form__input-small" id="changeText">A public project can be viewed by anyone</p>
   <input id="checkbox" type="hidden" name="is_private" value="{{project.is_private}}" />


   {{! Project Title }}
   <label for="project_title" class="form__label" style="margin-top: 25px;">Project Title</label>
   <input class="form__input" type="text" placeholder="Enter project title" name="project_title" value="{{project.project_title}}" required autocapitalize="none" />


   {{! Project Image }}
   <label for="project_image" class="form__label">Change Project Image</label>
   <input class="form__input" type="file" name="project_image" value="{{project.project_image}}" />


   {{! Project Video }}
   <label for="project_video" class="form__label" style="margin-top: 25px;">Change Project Video</label>
   <input class="form__input" type="text" placeholder="Enter a Youtube or Vimeo link" name="project_video" value="{{project.project_video}}" />


   {{! Project Description }}
   <label for="project_description" class="form__label" style="margin-top: 25px;">Write a Description</label>
   <textarea class="project-description__input" type="text" name="project_description" value="{{project.project_description}}">{{project.project_description}}</textarea>


   {{! Project Notes }}
   <div id="editor" name="editor"  placeholder="Hi {{user.username}}, here's a notepad to write some extra stuff down. You have up to 1000 words, have fun!"></div>
   <input id="projectNotes" name="project_notes" type="hidden">


   <input type="hidden" name="user_id" value="{{user._id}}">
   <p id="wordCount"></p>


   {{! Submit }}
   <button id="edit-project__form-btn" class="form__sign-up-button" name="submit" type="submit">Save</button>


</form>

{{/if}}
<script src="//ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/vendor/trumbowyg.min.js" type="text/javascript"></script>
<script src="/js/vendor/trumbowyg-upload.js" type="text/javascript"></script>
<script src="/js/vendor/trumbowyg-pasteembed.js" type="text/javascript"></script>
<script>
$(document).ready(function() {
   // Editor
   $('#editor').trumbowyg({
      svgPath: '/editorIcons/icons.svg',
      removeformatPasted: true,
      btnsDef: {
         image: {
            dropdown: ['insertImage', 'upload'],
            ico: 'insertImage'
         }
      },
      btns: [
         ['viewHTML'],
         ['formatting'],
         ['strong', 'em', 'del'],
         ['superscript', 'subscript'],
         ['link'],
         ['image'],
         ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'],
         ['unorderedList', 'orderedList'],
         ['horizontalRule'],
         ['removeformat']
      ],
      plugins: {
         upload: {
            serverPath: '/p/upload',
            fileFieldName: 'editor_image'
         }
      }
   });

   $('#edit-project__form-btn').click(function() {
      // Content of editor
      var contents = $('#editor').trumbowyg('html');

      // Take away html tags and line breaks
      var cleanUp = contents.replace(/<(?:.|\n)*?>/gm, '').replace(/(\r\n|\n|\r)/gm,"").replace('&nbsp;','');

      // Split apart each word
      var noSpaces = cleanUp.trim().split(/\s+/);

      // Count up the words
      var wordCount = noSpaces.length;

      if(wordCount < 1000 ) {
         $("#projectNotes").val(contents);
      }
   });

   $('#editor').keyup(function() {
      // Content of editor
      var contents = $('#editor').trumbowyg('html');

      // Take away html tags and line breaks
      var cleanUp = contents.replace(/<(?:.|\n)*?>/gm, '').replace(/(\r\n|\n|\r)/gm,"").replace('&nbsp;','');

      // Split apart each word
      var noSpaces = cleanUp.trim().split(/\s+/);

      // Count up the words
      var wordCount = noSpaces.length;

      if(wordCount > 1000 ) {
         $('#edit-project__form-btn').attr("type","button");
         $('#edit-project__form-btn').addClass('noClick__btn');
         $('#wordCount').text(wordCount + ' / 1000 words | Too Many Words');
      } else {
         $('#edit-project__form-btn').attr("type","submit");
         $('#edit-project__form-btn').removeClass('noClick__btn');
         $('#wordCount').text(wordCount + ' / 1000 words');
      }
   });

   {{#if notes_is_empty_string}}
   {{! Do nothing }}
   {{else}}
   $('#editor').trumbowyg('html', '{{{project_notes}}}');

   {{/if}}

});
</script>
